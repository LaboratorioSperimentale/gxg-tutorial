{"version":3,"file":"9609.bundle.js","mappings":"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","sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/docregistry/lib/context.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/docregistry/lib/default.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/docregistry/lib/mimedocument.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/docregistry/lib/registry.js"],"sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { Dialog, SessionContext, SessionContextDialogs, showDialog, showErrorMessage } from '@jupyterlab/apputils';\nimport { PathExt } from '@jupyterlab/coreutils';\nimport { RenderMimeRegistry } from '@jupyterlab/rendermime';\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { PromiseDelegate } from '@lumino/coreutils';\nimport { DisposableDelegate } from '@lumino/disposable';\nimport { Signal } from '@lumino/signaling';\nimport { Widget } from '@lumino/widgets';\n/**\n * An implementation of a document context.\n *\n * This class is typically instantiated by the document manager.\n */\nexport class Context {\n    /**\n     * Construct a new document context.\n     */\n    constructor(options) {\n        var _a, _b;\n        this._isReady = false;\n        this._isDisposed = false;\n        this._isPopulated = false;\n        this._path = '';\n        this._lineEnding = null;\n        this._contentsModel = null;\n        this._populatedPromise = new PromiseDelegate();\n        this._pathChanged = new Signal(this);\n        this._fileChanged = new Signal(this);\n        this._saveState = new Signal(this);\n        this._disposed = new Signal(this);\n        this._lastModifiedCheckMargin = 500;\n        this._timeConflictModalIsOpen = false;\n        const manager = (this._manager = options.manager);\n        this.translator = options.translator || nullTranslator;\n        this._trans = this.translator.load('jupyterlab');\n        this._factory = options.factory;\n        this._dialogs =\n            (_a = options.sessionDialogs) !== null && _a !== void 0 ? _a : new SessionContextDialogs({ translator: options.translator });\n        this._opener = options.opener || Private.noOp;\n        this._path = this._manager.contents.normalize(options.path);\n        this._lastModifiedCheckMargin = options.lastModifiedCheckMargin || 500;\n        const localPath = this._manager.contents.localPath(this._path);\n        const lang = this._factory.preferredLanguage(PathExt.basename(localPath));\n        const sharedFactory = this._manager.contents.getSharedModelFactory(this._path);\n        const sharedModel = sharedFactory === null || sharedFactory === void 0 ? void 0 : sharedFactory.createNew({\n            path: localPath,\n            format: this._factory.fileFormat,\n            contentType: this._factory.contentType,\n            collaborative: this._factory.collaborative\n        });\n        this._model = this._factory.createNew({\n            languagePreference: lang,\n            sharedModel,\n            collaborationEnabled: (_b = sharedFactory === null || sharedFactory === void 0 ? void 0 : sharedFactory.collaborative) !== null && _b !== void 0 ? _b : false\n        });\n        this._readyPromise = manager.ready.then(() => {\n            return this._populatedPromise.promise;\n        });\n        const ext = PathExt.extname(this._path);\n        this.sessionContext = new SessionContext({\n            sessionManager: manager.sessions,\n            specsManager: manager.kernelspecs,\n            path: localPath,\n            type: ext === '.ipynb' ? 'notebook' : 'file',\n            name: PathExt.basename(localPath),\n            kernelPreference: options.kernelPreference || { shouldStart: false },\n            setBusy: options.setBusy\n        });\n        this.sessionContext.propertyChanged.connect(this._onSessionChanged, this);\n        manager.contents.fileChanged.connect(this._onFileChanged, this);\n        this.urlResolver = new RenderMimeRegistry.UrlResolver({\n            path: this._path,\n            contents: manager.contents\n        });\n        this.model.sharedModel.changed.connect(this.onStateChanged, this);\n    }\n    /**\n     * A signal emitted when the path changes.\n     */\n    get pathChanged() {\n        return this._pathChanged;\n    }\n    /**\n     * A signal emitted when the model is saved or reverted.\n     */\n    get fileChanged() {\n        return this._fileChanged;\n    }\n    /**\n     * A signal emitted on the start and end of a saving operation.\n     */\n    get saveState() {\n        return this._saveState;\n    }\n    /**\n     * A signal emitted when the context is disposed.\n     */\n    get disposed() {\n        return this._disposed;\n    }\n    /**\n     * Configurable margin used to detect document modification conflicts, in milliseconds\n     */\n    get lastModifiedCheckMargin() {\n        return this._lastModifiedCheckMargin;\n    }\n    set lastModifiedCheckMargin(value) {\n        this._lastModifiedCheckMargin = value;\n    }\n    /**\n     * Get the model associated with the document.\n     */\n    get model() {\n        return this._model;\n    }\n    /**\n     * The current path associated with the document.\n     */\n    get path() {\n        return this._path;\n    }\n    /**\n     * The current local path associated with the document.\n     * If the document is in the default notebook file browser,\n     * this is the same as the path.\n     */\n    get localPath() {\n        return this._manager.contents.localPath(this._path);\n    }\n    /**\n     * The current contents model associated with the document.\n     *\n     * #### Notes\n     * The contents model will be null until the context is populated.\n     * It will have an  empty `contents` field.\n     */\n    get contentsModel() {\n        return this._contentsModel;\n    }\n    /**\n     * Get the model factory name.\n     *\n     * #### Notes\n     * This is not part of the `IContext` API.\n     */\n    get factoryName() {\n        return this.isDisposed ? '' : this._factory.name;\n    }\n    /**\n     * Test whether the context is disposed.\n     */\n    get isDisposed() {\n        return this._isDisposed;\n    }\n    /**\n     * Dispose of the resources held by the context.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        this._isDisposed = true;\n        this.sessionContext.dispose();\n        this._model.dispose();\n        // Ensure we dispose the `sharedModel` as it may have been generated in the context\n        // through the shared model factory.\n        this._model.sharedModel.dispose();\n        this._disposed.emit(void 0);\n        Signal.clearData(this);\n    }\n    /**\n     * Whether the context is ready.\n     */\n    get isReady() {\n        return this._isReady;\n    }\n    /**\n     * A promise that is fulfilled when the context is ready.\n     */\n    get ready() {\n        return this._readyPromise;\n    }\n    /**\n     * Whether the document can be saved via the Contents API.\n     */\n    get canSave() {\n        var _a;\n        return !!(((_a = this._contentsModel) === null || _a === void 0 ? void 0 : _a.writable) && !this._model.collaborative);\n    }\n    /**\n     * Initialize the context.\n     *\n     * @param isNew - Whether it is a new file.\n     *\n     * @returns a promise that resolves upon initialization.\n     */\n    async initialize(isNew) {\n        if (isNew) {\n            await this._save();\n        }\n        else {\n            await this._revert();\n        }\n        this.model.sharedModel.clearUndoHistory();\n    }\n    /**\n     * Rename the document.\n     *\n     * @param newName - the new name for the document.\n     */\n    rename(newName) {\n        return this.ready.then(() => {\n            return this._manager.ready.then(() => {\n                return this._rename(newName);\n            });\n        });\n    }\n    /**\n     * Save the document contents to disk.\n     */\n    async save() {\n        await this.ready;\n        await this._save();\n    }\n    /**\n     * Save the document to a different path chosen by the user.\n     *\n     * It will be rejected if the user abort providing a new path.\n     */\n    async saveAs() {\n        await this.ready;\n        const localPath = this._manager.contents.localPath(this.path);\n        const newLocalPath = await Private.getSavePath(localPath);\n        if (this.isDisposed || !newLocalPath) {\n            return;\n        }\n        const drive = this._manager.contents.driveName(this.path);\n        const newPath = drive == '' ? newLocalPath : `${drive}:${newLocalPath}`;\n        if (newPath === this._path) {\n            return this.save();\n        }\n        // Make sure the path does not exist.\n        try {\n            await this._manager.ready;\n            await this._manager.contents.get(newPath);\n            await this._maybeOverWrite(newPath);\n        }\n        catch (err) {\n            if (!err.response || err.response.status !== 404) {\n                throw err;\n            }\n            await this._finishSaveAs(newPath);\n        }\n    }\n    /**\n     * Download a file.\n     *\n     * @param path - The path of the file to be downloaded.\n     *\n     * @returns A promise which resolves when the file has begun\n     *   downloading.\n     */\n    async download() {\n        const url = await this._manager.contents.getDownloadUrl(this._path);\n        const element = document.createElement('a');\n        element.href = url;\n        element.download = '';\n        document.body.appendChild(element);\n        element.click();\n        document.body.removeChild(element);\n        return void 0;\n    }\n    /**\n     * Revert the document contents to disk contents.\n     */\n    async revert() {\n        await this.ready;\n        await this._revert();\n    }\n    /**\n     * Create a checkpoint for the file.\n     */\n    createCheckpoint() {\n        const contents = this._manager.contents;\n        return this._manager.ready.then(() => {\n            return contents.createCheckpoint(this._path);\n        });\n    }\n    /**\n     * Delete a checkpoint for the file.\n     */\n    deleteCheckpoint(checkpointId) {\n        const contents = this._manager.contents;\n        return this._manager.ready.then(() => {\n            return contents.deleteCheckpoint(this._path, checkpointId);\n        });\n    }\n    /**\n     * Restore the file to a known checkpoint state.\n     */\n    restoreCheckpoint(checkpointId) {\n        const contents = this._manager.contents;\n        const path = this._path;\n        return this._manager.ready.then(() => {\n            if (checkpointId) {\n                return contents.restoreCheckpoint(path, checkpointId);\n            }\n            return this.listCheckpoints().then(checkpoints => {\n                if (this.isDisposed || !checkpoints.length) {\n                    return;\n                }\n                checkpointId = checkpoints[checkpoints.length - 1].id;\n                return contents.restoreCheckpoint(path, checkpointId);\n            });\n        });\n    }\n    /**\n     * List available checkpoints for a file.\n     */\n    listCheckpoints() {\n        const contents = this._manager.contents;\n        return this._manager.ready.then(() => {\n            return contents.listCheckpoints(this._path);\n        });\n    }\n    /**\n     * Add a sibling widget to the document manager.\n     *\n     * @param widget - The widget to add to the document manager.\n     *\n     * @param options - The desired options for adding the sibling.\n     *\n     * @returns A disposable used to remove the sibling if desired.\n     *\n     * #### Notes\n     * It is assumed that the widget has the same model and context\n     * as the original widget.\n     */\n    addSibling(widget, options = {}) {\n        const opener = this._opener;\n        if (opener) {\n            opener(widget, options);\n        }\n        return new DisposableDelegate(() => {\n            widget.close();\n        });\n    }\n    onStateChanged(sender, changes) {\n        if (changes.stateChange) {\n            changes.stateChange.forEach(change => {\n                if (change.name === 'path') {\n                    const driveName = this._manager.contents.driveName(this._path);\n                    let newPath = change.newValue;\n                    if (driveName) {\n                        newPath = `${driveName}:${change.newValue}`;\n                    }\n                    this._updatePath(newPath);\n                }\n            });\n        }\n    }\n    /**\n     * Handle a change on the contents manager.\n     */\n    _onFileChanged(sender, change) {\n        var _a;\n        if (change.type !== 'rename') {\n            return;\n        }\n        let oldPath = change.oldValue && change.oldValue.path;\n        let newPath = change.newValue && change.newValue.path;\n        if (newPath && this._path.indexOf(oldPath || '') === 0) {\n            let changeModel = change.newValue;\n            // When folder name changed, `oldPath` is `foo`, `newPath` is `bar` and `this._path` is `foo/test`,\n            // we should update `foo/test` to `bar/test` as well\n            if (oldPath !== this._path) {\n                newPath = this._path.replace(new RegExp(`^${oldPath}/`), `${newPath}/`);\n                oldPath = this._path;\n                // Update client file model from folder change\n                changeModel = {\n                    last_modified: (_a = change.newValue) === null || _a === void 0 ? void 0 : _a.created,\n                    path: newPath\n                };\n            }\n            this._updateContentsModel({\n                ...this._contentsModel,\n                ...changeModel\n            });\n            this._updatePath(newPath);\n        }\n    }\n    /**\n     * Handle a change to a session property.\n     */\n    _onSessionChanged(sender, type) {\n        if (type !== 'path') {\n            return;\n        }\n        this._updatePath(this.sessionContext.session.path);\n    }\n    /**\n     * Update our contents model, without the content.\n     */\n    _updateContentsModel(model) {\n        const writable = model.writable && !this._model.collaborative;\n        const newModel = {\n            path: model.path,\n            name: model.name,\n            type: model.type,\n            content: undefined,\n            writable,\n            created: model.created,\n            last_modified: model.last_modified,\n            mimetype: model.mimetype,\n            format: model.format\n        };\n        const mod = this._contentsModel ? this._contentsModel.last_modified : null;\n        this._contentsModel = newModel;\n        this._model.sharedModel.setState('last_modified', newModel.last_modified);\n        if (!mod || newModel.last_modified !== mod) {\n            this._fileChanged.emit(newModel);\n        }\n    }\n    _updatePath(newPath) {\n        var _a, _b, _c, _d;\n        if (this._path === newPath) {\n            return;\n        }\n        this._path = newPath;\n        const localPath = this._manager.contents.localPath(newPath);\n        const name = PathExt.basename(localPath);\n        if (((_a = this.sessionContext.session) === null || _a === void 0 ? void 0 : _a.path) !== localPath) {\n            void ((_b = this.sessionContext.session) === null || _b === void 0 ? void 0 : _b.setPath(localPath));\n        }\n        if (((_c = this.sessionContext.session) === null || _c === void 0 ? void 0 : _c.name) !== name) {\n            void ((_d = this.sessionContext.session) === null || _d === void 0 ? void 0 : _d.setName(name));\n        }\n        if (this.urlResolver.path !== newPath) {\n            this.urlResolver.path = newPath;\n        }\n        if (this._contentsModel &&\n            (this._contentsModel.path !== newPath ||\n                this._contentsModel.name !== name)) {\n            const contentsModel = {\n                ...this._contentsModel,\n                name: name,\n                path: newPath\n            };\n            this._updateContentsModel(contentsModel);\n        }\n        if (this._model.sharedModel.getState('path') !== localPath) {\n            this._model.sharedModel.setState('path', localPath);\n        }\n        this._pathChanged.emit(newPath);\n    }\n    /**\n     * Handle an initial population.\n     */\n    async _populate() {\n        this._isPopulated = true;\n        this._isReady = true;\n        this._populatedPromise.resolve(void 0);\n        // Add a checkpoint if none exists and the file is writable.\n        await this._maybeCheckpoint(false);\n        if (this.isDisposed) {\n            return;\n        }\n        // Update the kernel preference.\n        const name = this._model.defaultKernelName ||\n            this.sessionContext.kernelPreference.name;\n        this.sessionContext.kernelPreference = {\n            ...this.sessionContext.kernelPreference,\n            name,\n            language: this._model.defaultKernelLanguage\n        };\n        // Note: we don't wait on the session to initialize\n        // so that the user can be shown the content before\n        // any kernel has started.\n        void this.sessionContext.initialize().then(shouldSelect => {\n            if (shouldSelect) {\n                void this._dialogs.selectKernel(this.sessionContext);\n            }\n        });\n    }\n    /**\n     * Rename the document.\n     *\n     * @param newName - the new name for the document.\n     */\n    async _rename(newName) {\n        var _a, _b;\n        const splitPath = this.localPath.split('/');\n        splitPath[splitPath.length - 1] = newName;\n        let newPath = PathExt.join(...splitPath);\n        const driveName = this._manager.contents.driveName(this.path);\n        if (driveName) {\n            newPath = `${driveName}:${newPath}`;\n        }\n        // rename triggers a fileChanged which updates the contents model\n        await this._manager.contents.rename(this.path, newPath);\n        await ((_a = this.sessionContext.session) === null || _a === void 0 ? void 0 : _a.setPath(newPath));\n        await ((_b = this.sessionContext.session) === null || _b === void 0 ? void 0 : _b.setName(newName));\n        this._path = newPath;\n        const localPath = this._manager.contents.localPath(this._path);\n        this.urlResolver.path = newPath;\n        this._model.sharedModel.setState('path', localPath);\n        this._pathChanged.emit(newPath);\n    }\n    /**\n     * Save the document contents to disk.\n     */\n    async _save() {\n        this._saveState.emit('started');\n        const options = this._createSaveOptions();\n        try {\n            let value;\n            await this._manager.ready;\n            value = await this._maybeSave(options);\n            if (this.isDisposed) {\n                return;\n            }\n            this._model.dirty = false;\n            this._updateContentsModel(value);\n            if (!this._isPopulated) {\n                await this._populate();\n            }\n            // Emit completion.\n            this._saveState.emit('completed');\n        }\n        catch (err) {\n            // If the save has been canceled by the user, throw the error\n            // so that whoever called save() can decide what to do.\n            const { name } = err;\n            if (name === 'ModalCancelError' || name === 'ModalDuplicateError') {\n                throw err;\n            }\n            // Otherwise show an error message and throw the error.\n            const localPath = this._manager.contents.localPath(this._path);\n            const file = PathExt.basename(localPath);\n            void this._handleError(err, this._trans.__('File Save Error for %1', file));\n            // Emit failure.\n            this._saveState.emit('failed');\n            throw err;\n        }\n    }\n    /**\n     * Revert the document contents to disk contents.\n     *\n     * @param initializeModel - call the model's initialization function after\n     * deserializing the content.\n     */\n    _revert(initializeModel = false) {\n        const opts = {\n            type: this._factory.contentType,\n            content: this._factory.fileFormat !== null,\n            ...(this._factory.fileFormat !== null\n                ? { format: this._factory.fileFormat }\n                : {})\n        };\n        const path = this._path;\n        const model = this._model;\n        return this._manager.ready\n            .then(() => {\n            return this._manager.contents.get(path, opts);\n        })\n            .then(contents => {\n            if (this.isDisposed) {\n                return;\n            }\n            if (contents.content) {\n                if (contents.format === 'json') {\n                    model.fromJSON(contents.content);\n                }\n                else {\n                    let content = contents.content;\n                    // Convert line endings if necessary, marking the file\n                    // as dirty.\n                    if (content.indexOf('\\r\\n') !== -1) {\n                        this._lineEnding = '\\r\\n';\n                        content = content.replace(/\\r\\n/g, '\\n');\n                    }\n                    else if (content.indexOf('\\r') !== -1) {\n                        this._lineEnding = '\\r';\n                        content = content.replace(/\\r/g, '\\n');\n                    }\n                    else {\n                        this._lineEnding = null;\n                    }\n                    model.fromString(content);\n                }\n            }\n            this._updateContentsModel(contents);\n            model.dirty = false;\n            if (!this._isPopulated) {\n                return this._populate();\n            }\n        })\n            .catch(async (err) => {\n            const localPath = this._manager.contents.localPath(this._path);\n            const name = PathExt.basename(localPath);\n            void this._handleError(err, this._trans.__('File Load Error for %1', name));\n            throw err;\n        });\n    }\n    /**\n     * Save a file, dealing with conflicts.\n     */\n    _maybeSave(options) {\n        const path = this._path;\n        // Make sure the file has not changed on disk.\n        const promise = this._manager.contents.get(path, { content: false });\n        return promise.then(model => {\n            var _a;\n            if (this.isDisposed) {\n                return Promise.reject(new Error('Disposed'));\n            }\n            // We want to check last_modified (disk) > last_modified (client)\n            // (our last save)\n            // In some cases the filesystem reports an inconsistent time, so we allow buffer when comparing.\n            const lastModifiedCheckMargin = this._lastModifiedCheckMargin;\n            const ycontextModified = this._model.sharedModel.getState('last_modified');\n            // prefer using the timestamp from the state because it is more up to date\n            const modified = ycontextModified || ((_a = this.contentsModel) === null || _a === void 0 ? void 0 : _a.last_modified);\n            const tClient = modified ? new Date(modified) : new Date();\n            const tDisk = new Date(model.last_modified);\n            if (modified &&\n                tDisk.getTime() - tClient.getTime() > lastModifiedCheckMargin) {\n                return this._timeConflict(tClient, model, options);\n            }\n            return this._manager.contents.save(path, options);\n        }, err => {\n            if (err.response && err.response.status === 404) {\n                return this._manager.contents.save(path, options);\n            }\n            throw err;\n        });\n    }\n    /**\n     * Handle a save/load error with a dialog.\n     */\n    async _handleError(err, title) {\n        await showErrorMessage(title, err);\n        return;\n    }\n    /**\n     * Add a checkpoint the file is writable.\n     */\n    _maybeCheckpoint(force) {\n        let promise = Promise.resolve(void 0);\n        if (!this.canSave) {\n            return promise;\n        }\n        if (force) {\n            promise = this.createCheckpoint().then( /* no-op */);\n        }\n        else {\n            promise = this.listCheckpoints().then(checkpoints => {\n                if (!this.isDisposed && !checkpoints.length && this.canSave) {\n                    return this.createCheckpoint().then( /* no-op */);\n                }\n            });\n        }\n        return promise.catch(err => {\n            // Handle a read-only folder.\n            if (!err.response || err.response.status !== 403) {\n                throw err;\n            }\n        });\n    }\n    /**\n     * Handle a time conflict.\n     */\n    _timeConflict(tClient, model, options) {\n        const tDisk = new Date(model.last_modified);\n        console.warn(`Last saving performed ${tClient} ` +\n            `while the current file seems to have been saved ` +\n            `${tDisk}`);\n        if (this._timeConflictModalIsOpen) {\n            const error = new Error('Modal is already displayed');\n            error.name = 'ModalDuplicateError';\n            return Promise.reject(error);\n        }\n        const body = this._trans.__(`\"%1\" has changed on disk since the last time it was opened or saved.\nDo you want to overwrite the file on disk with the version open here,\nor load the version on disk (revert)?`, this.path);\n        const revertBtn = Dialog.okButton({\n            label: this._trans.__('Revert'),\n            actions: ['revert']\n        });\n        const overwriteBtn = Dialog.warnButton({\n            label: this._trans.__('Overwrite'),\n            actions: ['overwrite']\n        });\n        this._timeConflictModalIsOpen = true;\n        return showDialog({\n            title: this._trans.__('File Changed'),\n            body,\n            buttons: [Dialog.cancelButton(), revertBtn, overwriteBtn]\n        }).then(result => {\n            this._timeConflictModalIsOpen = false;\n            if (this.isDisposed) {\n                return Promise.reject(new Error('Disposed'));\n            }\n            if (result.button.actions.includes('overwrite')) {\n                return this._manager.contents.save(this._path, options);\n            }\n            if (result.button.actions.includes('revert')) {\n                return this.revert().then(() => {\n                    return model;\n                });\n            }\n            const error = new Error('Cancel');\n            error.name = 'ModalCancelError';\n            return Promise.reject(error); // Otherwise cancel the save.\n        });\n    }\n    /**\n     * Handle a time conflict.\n     */\n    _maybeOverWrite(path) {\n        const body = this._trans.__('\"%1\" already exists. Do you want to replace it?', path);\n        const overwriteBtn = Dialog.warnButton({\n            label: this._trans.__('Overwrite'),\n            accept: true\n        });\n        return showDialog({\n            title: this._trans.__('File Overwrite?'),\n            body,\n            buttons: [Dialog.cancelButton(), overwriteBtn]\n        }).then(result => {\n            if (this.isDisposed) {\n                return Promise.reject(new Error('Disposed'));\n            }\n            if (result.button.accept) {\n                return this._manager.contents.delete(path).then(() => {\n                    return this._finishSaveAs(path);\n                });\n            }\n        });\n    }\n    /**\n     * Finish a saveAs operation given a new path.\n     */\n    async _finishSaveAs(newPath) {\n        this._saveState.emit('started');\n        try {\n            await this._manager.ready;\n            const options = this._createSaveOptions();\n            await this._manager.contents.save(newPath, options);\n            await this._maybeCheckpoint(true);\n            // Emit completion.\n            this._saveState.emit('completed');\n        }\n        catch (err) {\n            // If the save has been canceled by the user,\n            // throw the error so that whoever called save()\n            // can decide what to do.\n            if (err.message === 'Cancel' ||\n                err.message === 'Modal is already displayed') {\n                throw err;\n            }\n            // Otherwise show an error message and throw the error.\n            const localPath = this._manager.contents.localPath(this._path);\n            const name = PathExt.basename(localPath);\n            void this._handleError(err, this._trans.__('File Save Error for %1', name));\n            // Emit failure.\n            this._saveState.emit('failed');\n            return;\n        }\n    }\n    _createSaveOptions() {\n        let content = null;\n        if (this._factory.fileFormat === 'json') {\n            content = this._model.toJSON();\n        }\n        else {\n            content = this._model.toString();\n            if (this._lineEnding) {\n                content = content.replace(/\\n/g, this._lineEnding);\n            }\n        }\n        return {\n            type: this._factory.contentType,\n            format: this._factory.fileFormat,\n            content\n        };\n    }\n}\n/**\n * A namespace for private data.\n */\nvar Private;\n(function (Private) {\n    /**\n     * Get a new file path from the user.\n     */\n    function getSavePath(path, translator) {\n        translator = translator || nullTranslator;\n        const trans = translator.load('jupyterlab');\n        const saveBtn = Dialog.okButton({ label: trans.__('Save'), accept: true });\n        return showDialog({\n            title: trans.__('Save File As…'),\n            body: new SaveWidget(path),\n            buttons: [Dialog.cancelButton(), saveBtn]\n        }).then(result => {\n            var _a;\n            if (result.button.accept) {\n                return (_a = result.value) !== null && _a !== void 0 ? _a : undefined;\n            }\n            return;\n        });\n    }\n    Private.getSavePath = getSavePath;\n    /**\n     * A no-op function.\n     */\n    function noOp() {\n        /* no-op */\n    }\n    Private.noOp = noOp;\n    /*\n     * A widget that gets a file path from a user.\n     */\n    class SaveWidget extends Widget {\n        /**\n         * Construct a new save widget.\n         */\n        constructor(path) {\n            super({ node: createSaveNode(path) });\n        }\n        /**\n         * Get the value for the widget.\n         */\n        getValue() {\n            return this.node.value;\n        }\n    }\n    /**\n     * Create the node for a save widget.\n     */\n    function createSaveNode(path) {\n        const input = document.createElement('input');\n        input.value = path;\n        return input;\n    }\n})(Private || (Private = {}));\n//# sourceMappingURL=context.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { MainAreaWidget, setToolbar } from '@jupyterlab/apputils';\nimport { CodeEditor } from '@jupyterlab/codeeditor';\nimport { PathExt } from '@jupyterlab/coreutils';\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { Signal } from '@lumino/signaling';\n/**\n * The default implementation of a document model.\n */\nexport class DocumentModel extends CodeEditor.Model {\n    /**\n     * Construct a new document model.\n     */\n    constructor(options = {}) {\n        var _a;\n        super({ sharedModel: options.sharedModel });\n        this._defaultLang = '';\n        this._dirty = false;\n        this._readOnly = false;\n        this._contentChanged = new Signal(this);\n        this._stateChanged = new Signal(this);\n        this._defaultLang = (_a = options.languagePreference) !== null && _a !== void 0 ? _a : '';\n        this._collaborationEnabled = !!options.collaborationEnabled;\n        this.sharedModel.changed.connect(this._onStateChanged, this);\n    }\n    /**\n     * A signal emitted when the document content changes.\n     */\n    get contentChanged() {\n        return this._contentChanged;\n    }\n    /**\n     * A signal emitted when the document state changes.\n     */\n    get stateChanged() {\n        return this._stateChanged;\n    }\n    /**\n     * The dirty state of the document.\n     */\n    get dirty() {\n        return this._dirty;\n    }\n    set dirty(newValue) {\n        const oldValue = this._dirty;\n        if (newValue === oldValue) {\n            return;\n        }\n        this._dirty = newValue;\n        this.triggerStateChange({\n            name: 'dirty',\n            oldValue,\n            newValue\n        });\n    }\n    /**\n     * The read only state of the document.\n     */\n    get readOnly() {\n        return this._readOnly;\n    }\n    set readOnly(newValue) {\n        if (newValue === this._readOnly) {\n            return;\n        }\n        const oldValue = this._readOnly;\n        this._readOnly = newValue;\n        this.triggerStateChange({ name: 'readOnly', oldValue, newValue });\n    }\n    /**\n     * The default kernel name of the document.\n     *\n     * #### Notes\n     * This is a read-only property.\n     */\n    get defaultKernelName() {\n        return '';\n    }\n    /**\n     * The default kernel language of the document.\n     *\n     * #### Notes\n     * This is a read-only property.\n     */\n    get defaultKernelLanguage() {\n        return this._defaultLang;\n    }\n    /**\n     * Whether the model is collaborative or not.\n     */\n    get collaborative() {\n        return this._collaborationEnabled;\n    }\n    /**\n     * Serialize the model to a string.\n     */\n    toString() {\n        return this.sharedModel.getSource();\n    }\n    /**\n     * Deserialize the model from a string.\n     *\n     * #### Notes\n     * Should emit a [contentChanged] signal.\n     */\n    fromString(value) {\n        this.sharedModel.setSource(value);\n    }\n    /**\n     * Serialize the model to JSON.\n     */\n    toJSON() {\n        return JSON.parse(this.sharedModel.getSource() || 'null');\n    }\n    /**\n     * Deserialize the model from JSON.\n     *\n     * #### Notes\n     * Should emit a [contentChanged] signal.\n     */\n    fromJSON(value) {\n        this.fromString(JSON.stringify(value));\n    }\n    /**\n     * Initialize the model with its current state.\n     */\n    initialize() {\n        return;\n    }\n    /**\n     * Trigger a state change signal.\n     */\n    triggerStateChange(args) {\n        this._stateChanged.emit(args);\n    }\n    /**\n     * Trigger a content changed signal.\n     */\n    triggerContentChange() {\n        this._contentChanged.emit(void 0);\n        this.dirty = true;\n    }\n    _onStateChanged(sender, changes) {\n        if (changes.sourceChange) {\n            this.triggerContentChange();\n        }\n        if (changes.stateChange) {\n            changes.stateChange.forEach(value => {\n                if (value.name === 'dirty') {\n                    // Setting `dirty` will trigger the state change.\n                    // We always set `dirty` because the shared model state\n                    // and the local attribute are synchronized one way shared model -> _dirty\n                    this.dirty = value.newValue;\n                }\n                else if (value.oldValue !== value.newValue) {\n                    this.triggerStateChange({\n                        newValue: undefined,\n                        oldValue: undefined,\n                        ...value\n                    });\n                }\n            });\n        }\n    }\n}\n/**\n * An implementation of a model factory for text files.\n */\nexport class TextModelFactory {\n    /**\n     * Instantiates a TextModelFactory.\n     */\n    constructor(collaborative) {\n        this._isDisposed = false;\n        this._collaborative = collaborative !== null && collaborative !== void 0 ? collaborative : true;\n    }\n    /**\n     * The name of the model type.\n     *\n     * #### Notes\n     * This is a read-only property.\n     */\n    get name() {\n        return 'text';\n    }\n    /**\n     * The type of the file.\n     *\n     * #### Notes\n     * This is a read-only property.\n     */\n    get contentType() {\n        return 'file';\n    }\n    /**\n     * The format of the file.\n     *\n     * This is a read-only property.\n     */\n    get fileFormat() {\n        return 'text';\n    }\n    /**\n     * Whether the model is collaborative or not.\n     */\n    get collaborative() {\n        return this._collaborative;\n    }\n    /**\n     * Get whether the model factory has been disposed.\n     */\n    get isDisposed() {\n        return this._isDisposed;\n    }\n    /**\n     * Dispose of the resources held by the model factory.\n     */\n    dispose() {\n        this._isDisposed = true;\n    }\n    /**\n     * Create a new model.\n     *\n     * @param options - Model options.\n     *\n     * @returns A new document model.\n     */\n    createNew(options = {}) {\n        const collaborative = options.collaborationEnabled && this.collaborative;\n        return new DocumentModel({\n            ...options,\n            collaborationEnabled: collaborative\n        });\n    }\n    /**\n     * Get the preferred kernel language given a file path.\n     */\n    preferredLanguage(path) {\n        return '';\n    }\n}\n/**\n * An implementation of a model factory for base64 files.\n */\nexport class Base64ModelFactory extends TextModelFactory {\n    /**\n     * The name of the model type.\n     *\n     * #### Notes\n     * This is a read-only property.\n     */\n    get name() {\n        return 'base64';\n    }\n    /**\n     * The type of the file.\n     *\n     * #### Notes\n     * This is a read-only property.\n     */\n    get contentType() {\n        return 'file';\n    }\n    /**\n     * The format of the file.\n     *\n     * This is a read-only property.\n     */\n    get fileFormat() {\n        return 'base64';\n    }\n}\n/**\n * The default implementation of a widget factory.\n */\nexport class ABCWidgetFactory {\n    /**\n     * Construct a new `ABCWidgetFactory`.\n     */\n    constructor(options) {\n        this._isDisposed = false;\n        this._widgetCreated = new Signal(this);\n        this._translator = options.translator || nullTranslator;\n        this._name = options.name;\n        this._label = options.label || options.name;\n        this._readOnly = options.readOnly === undefined ? false : options.readOnly;\n        this._defaultFor = options.defaultFor ? options.defaultFor.slice() : [];\n        this._defaultRendered = (options.defaultRendered || []).slice();\n        this._fileTypes = options.fileTypes.slice();\n        this._modelName = options.modelName || 'text';\n        this._preferKernel = !!options.preferKernel;\n        this._canStartKernel = !!options.canStartKernel;\n        this._shutdownOnClose = !!options.shutdownOnClose;\n        this._autoStartDefault = !!options.autoStartDefault;\n        this._toolbarFactory = options.toolbarFactory;\n    }\n    /**\n     * A signal emitted when a widget is created.\n     */\n    get widgetCreated() {\n        return this._widgetCreated;\n    }\n    /**\n     * Get whether the model factory has been disposed.\n     */\n    get isDisposed() {\n        return this._isDisposed;\n    }\n    /**\n     * Dispose of the resources used by the document manager.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        this._isDisposed = true;\n        Signal.clearData(this);\n    }\n    /**\n     * Whether the widget factory is read only.\n     */\n    get readOnly() {\n        return this._readOnly;\n    }\n    /**\n     * A unique name identifying of the widget.\n     */\n    get name() {\n        return this._name;\n    }\n    /**\n     * The label of the widget to display in dialogs.\n     * If not given, name is used instead.\n     */\n    get label() {\n        return this._label;\n    }\n    /**\n     * The file types the widget can view.\n     */\n    get fileTypes() {\n        return this._fileTypes.slice();\n    }\n    /**\n     * The registered name of the model type used to create the widgets.\n     */\n    get modelName() {\n        return this._modelName;\n    }\n    /**\n     * The file types for which the factory should be the default.\n     */\n    get defaultFor() {\n        return this._defaultFor.slice();\n    }\n    /**\n     * The file types for which the factory should be the default for\n     * rendering a document model, if different from editing.\n     */\n    get defaultRendered() {\n        return this._defaultRendered.slice();\n    }\n    /**\n     * Whether the widgets prefer having a kernel started.\n     */\n    get preferKernel() {\n        return this._preferKernel;\n    }\n    /**\n     * Whether the widgets can start a kernel when opened.\n     */\n    get canStartKernel() {\n        return this._canStartKernel;\n    }\n    /**\n     * The application language translator.\n     */\n    get translator() {\n        return this._translator;\n    }\n    /**\n     * Whether the kernel should be shutdown when the widget is closed.\n     */\n    get shutdownOnClose() {\n        return this._shutdownOnClose;\n    }\n    set shutdownOnClose(value) {\n        this._shutdownOnClose = value;\n    }\n    /**\n     * Whether to automatically select the preferred kernel during a kernel start\n     */\n    get autoStartDefault() {\n        return this._autoStartDefault;\n    }\n    set autoStartDefault(value) {\n        this._autoStartDefault = value;\n    }\n    /**\n     * Create a new widget given a document model and a context.\n     *\n     * #### Notes\n     * It should emit the [widgetCreated] signal with the new widget.\n     */\n    createNew(context, source) {\n        var _a;\n        // Create the new widget\n        const widget = this.createNewWidget(context, source);\n        // Add toolbar\n        setToolbar(widget, (_a = this._toolbarFactory) !== null && _a !== void 0 ? _a : this.defaultToolbarFactory.bind(this));\n        // Emit widget created signal\n        this._widgetCreated.emit(widget);\n        return widget;\n    }\n    /**\n     * Default factory for toolbar items to be added after the widget is created.\n     */\n    defaultToolbarFactory(widget) {\n        return [];\n    }\n}\n/**\n * The class name added to a dirty widget.\n */\nconst DIRTY_CLASS = 'jp-mod-dirty';\n/**\n * A document widget implementation.\n */\nexport class DocumentWidget extends MainAreaWidget {\n    constructor(options) {\n        // Include the context ready promise in the widget reveal promise\n        options.reveal = Promise.all([options.reveal, options.context.ready]);\n        super(options);\n        this.context = options.context;\n        // Handle context path changes\n        this.context.pathChanged.connect(this._onPathChanged, this);\n        this._onPathChanged(this.context, this.context.path);\n        // Listen for changes in the dirty state.\n        this.context.model.stateChanged.connect(this._onModelStateChanged, this);\n        void this.context.ready.then(() => {\n            this._handleDirtyState();\n        });\n        // listen for changes to the title object\n        this.title.changed.connect(this._onTitleChanged, this);\n    }\n    /**\n     * Set URI fragment identifier.\n     */\n    setFragment(fragment) {\n        /* no-op */\n    }\n    /**\n     * Handle a title change.\n     */\n    async _onTitleChanged(_sender) {\n        const validNameExp = /[\\/\\\\:]/;\n        const name = this.title.label;\n        // Use localPath to avoid the drive name\n        const filename = this.context.localPath.split('/').pop() || this.context.localPath;\n        if (name === filename) {\n            return;\n        }\n        if (name.length > 0 && !validNameExp.test(name)) {\n            const oldPath = this.context.path;\n            await this.context.rename(name);\n            if (this.context.path !== oldPath) {\n                // Rename succeeded\n                return;\n            }\n        }\n        // Reset title if name is invalid or rename fails\n        this.title.label = filename;\n    }\n    /**\n     * Handle a path change.\n     */\n    _onPathChanged(sender, path) {\n        this.title.label = PathExt.basename(sender.localPath);\n        // The document is not untitled any more.\n        this.isUntitled = false;\n    }\n    /**\n     * Handle a change to the context model state.\n     */\n    _onModelStateChanged(sender, args) {\n        if (args.name === 'dirty') {\n            this._handleDirtyState();\n        }\n    }\n    /**\n     * Handle the dirty state of the context model.\n     */\n    _handleDirtyState() {\n        if (this.context.model.dirty &&\n            !this.title.className.includes(DIRTY_CLASS)) {\n            this.title.className += ` ${DIRTY_CLASS}`;\n        }\n        else {\n            this.title.className = this.title.className.replace(DIRTY_CLASS, '');\n        }\n    }\n}\n//# sourceMappingURL=default.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { Printing, showErrorMessage } from '@jupyterlab/apputils';\nimport { ActivityMonitor } from '@jupyterlab/coreutils';\nimport { MimeModel } from '@jupyterlab/rendermime';\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { JSONExt, PromiseDelegate } from '@lumino/coreutils';\nimport { MessageLoop } from '@lumino/messaging';\nimport { StackedLayout, Widget } from '@lumino/widgets';\nimport { ABCWidgetFactory, DocumentWidget } from './default';\n/**\n * A content widget for a rendered mimetype document.\n */\nexport class MimeContent extends Widget {\n    /**\n     * Construct a new widget.\n     */\n    constructor(options) {\n        super();\n        /**\n         * A bound change callback.\n         */\n        this._changeCallback = (options) => {\n            if (!options.data || !options.data[this.mimeType]) {\n                return;\n            }\n            const data = options.data[this.mimeType];\n            if (typeof data === 'string') {\n                if (data !== this._context.model.toString()) {\n                    this._context.model.fromString(data);\n                }\n            }\n            else if (data !== null &&\n                data !== undefined &&\n                !JSONExt.deepEqual(data, this._context.model.toJSON())) {\n                this._context.model.fromJSON(data);\n            }\n        };\n        this._fragment = '';\n        this._ready = new PromiseDelegate();\n        this._isRendering = false;\n        this._renderRequested = false;\n        this.addClass('jp-MimeDocument');\n        this.translator = options.translator || nullTranslator;\n        this._trans = this.translator.load('jupyterlab');\n        this.mimeType = options.mimeType;\n        this._dataType = options.dataType || 'string';\n        this._context = options.context;\n        this.renderer = options.renderer;\n        const layout = (this.layout = new StackedLayout());\n        layout.addWidget(this.renderer);\n        this._context.ready\n            .then(() => {\n            return this._render();\n        })\n            .then(() => {\n            // After rendering for the first time, send an activation request if we\n            // are currently focused.\n            if (this.node === document.activeElement) {\n                // We want to synchronously send (not post) the activate message, while\n                // we know this node still has focus.\n                MessageLoop.sendMessage(this.renderer, Widget.Msg.ActivateRequest);\n            }\n            // Throttle the rendering rate of the widget.\n            this._monitor = new ActivityMonitor({\n                signal: this._context.model.contentChanged,\n                timeout: options.renderTimeout\n            });\n            this._monitor.activityStopped.connect(this.update, this);\n            this._ready.resolve(undefined);\n        })\n            .catch(reason => {\n            // Dispose the document if rendering fails.\n            requestAnimationFrame(() => {\n                this.dispose();\n            });\n            void showErrorMessage(this._trans.__('Renderer Failure: %1', this._context.path), reason);\n        });\n    }\n    /**\n     * Print method. Deferred to the renderer.\n     */\n    [Printing.symbol]() {\n        return Printing.getPrintFunction(this.renderer);\n    }\n    /**\n     * A promise that resolves when the widget is ready.\n     */\n    get ready() {\n        return this._ready.promise;\n    }\n    /**\n     * Set URI fragment identifier.\n     */\n    setFragment(fragment) {\n        this._fragment = fragment;\n        this.update();\n    }\n    /**\n     * Dispose of the resources held by the widget.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        if (this._monitor) {\n            this._monitor.dispose();\n        }\n        this._monitor = null;\n        super.dispose();\n    }\n    /**\n     * Handle an `update-request` message to the widget.\n     */\n    onUpdateRequest(msg) {\n        if (this._context.isReady) {\n            void this._render();\n            this._fragment = '';\n        }\n    }\n    /**\n     * Render the mime content.\n     */\n    async _render() {\n        if (this.isDisposed) {\n            return;\n        }\n        // Since rendering is async, we note render requests that happen while we\n        // actually are rendering for a future rendering.\n        if (this._isRendering) {\n            this._renderRequested = true;\n            return;\n        }\n        // Set up for this rendering pass.\n        this._renderRequested = false;\n        const context = this._context;\n        const model = context.model;\n        const data = {};\n        if (this._dataType === 'string') {\n            data[this.mimeType] = model.toString();\n        }\n        else {\n            data[this.mimeType] = model.toJSON();\n        }\n        const mimeModel = new MimeModel({\n            data,\n            callback: this._changeCallback,\n            metadata: { fragment: this._fragment }\n        });\n        try {\n            // Do the rendering asynchronously.\n            this._isRendering = true;\n            await this.renderer.renderModel(mimeModel);\n            this._isRendering = false;\n            // If there is an outstanding request to render, go ahead and render\n            if (this._renderRequested) {\n                return this._render();\n            }\n        }\n        catch (reason) {\n            // Dispose the document if rendering fails.\n            requestAnimationFrame(() => {\n                this.dispose();\n            });\n            void showErrorMessage(this._trans.__('Renderer Failure: %1', context.path), reason);\n        }\n    }\n}\n/**\n * A document widget for mime content.\n */\nexport class MimeDocument extends DocumentWidget {\n    setFragment(fragment) {\n        this.content.setFragment(fragment);\n    }\n}\n/**\n * An implementation of a widget factory for a rendered mimetype document.\n */\nexport class MimeDocumentFactory extends ABCWidgetFactory {\n    /**\n     * Construct a new mimetype widget factory.\n     */\n    constructor(options) {\n        super(Private.createRegistryOptions(options));\n        this._rendermime = options.rendermime;\n        this._renderTimeout = options.renderTimeout || 1000;\n        this._dataType = options.dataType || 'string';\n        this._fileType = options.primaryFileType;\n        this._factory = options.factory;\n    }\n    /**\n     * Create a new widget given a context.\n     */\n    createNewWidget(context) {\n        var _a, _b;\n        const ft = this._fileType;\n        const mimeType = (ft === null || ft === void 0 ? void 0 : ft.mimeTypes.length) ? ft.mimeTypes[0] : 'text/plain';\n        const rendermime = this._rendermime.clone({\n            resolver: context.urlResolver\n        });\n        let renderer;\n        if (this._factory && this._factory.mimeTypes.includes(mimeType)) {\n            renderer = this._factory.createRenderer({\n                mimeType,\n                resolver: rendermime.resolver,\n                sanitizer: rendermime.sanitizer,\n                linkHandler: rendermime.linkHandler,\n                latexTypesetter: rendermime.latexTypesetter,\n                markdownParser: rendermime.markdownParser\n            });\n        }\n        else {\n            renderer = rendermime.createRenderer(mimeType);\n        }\n        const content = new MimeContent({\n            context,\n            renderer,\n            mimeType,\n            renderTimeout: this._renderTimeout,\n            dataType: this._dataType\n        });\n        content.title.icon = ft === null || ft === void 0 ? void 0 : ft.icon;\n        content.title.iconClass = (_a = ft === null || ft === void 0 ? void 0 : ft.iconClass) !== null && _a !== void 0 ? _a : '';\n        content.title.iconLabel = (_b = ft === null || ft === void 0 ? void 0 : ft.iconLabel) !== null && _b !== void 0 ? _b : '';\n        const widget = new MimeDocument({ content, context });\n        return widget;\n    }\n}\n/**\n * The namespace for the module implementation details.\n */\nvar Private;\n(function (Private) {\n    /**\n     * Create the document registry options.\n     */\n    function createRegistryOptions(options) {\n        return {\n            ...options,\n            readOnly: true\n        };\n    }\n    Private.createRegistryOptions = createRegistryOptions;\n})(Private || (Private = {}));\n//# sourceMappingURL=mimedocument.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { PathExt } from '@jupyterlab/coreutils';\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { fileIcon, folderIcon, imageIcon, jsonIcon, juliaIcon, markdownIcon, notebookIcon, pdfIcon, pythonIcon, rKernelIcon, spreadsheetIcon, yamlIcon } from '@jupyterlab/ui-components';\nimport { ArrayExt, find } from '@lumino/algorithm';\nimport { DisposableDelegate } from '@lumino/disposable';\nimport { Signal } from '@lumino/signaling';\nimport { TextModelFactory } from './default';\n/**\n * The document registry.\n */\nexport class DocumentRegistry {\n    /**\n     * Construct a new document registry.\n     */\n    constructor(options = {}) {\n        this._modelFactories = Object.create(null);\n        this._widgetFactories = Object.create(null);\n        this._defaultWidgetFactory = '';\n        this._defaultWidgetFactoryOverrides = Object.create(null);\n        this._defaultWidgetFactories = Object.create(null);\n        this._defaultRenderedWidgetFactories = Object.create(null);\n        this._widgetFactoriesForFileType = Object.create(null);\n        this._fileTypes = [];\n        this._extenders = Object.create(null);\n        this._changed = new Signal(this);\n        this._isDisposed = false;\n        const factory = options.textModelFactory;\n        this.translator = options.translator || nullTranslator;\n        if (factory && factory.name !== 'text') {\n            throw new Error('Text model factory must have the name `text`');\n        }\n        this._modelFactories['text'] = factory || new TextModelFactory(true);\n        const fts = options.initialFileTypes ||\n            DocumentRegistry.getDefaultFileTypes(this.translator);\n        fts.forEach(ft => {\n            const value = {\n                ...DocumentRegistry.getFileTypeDefaults(this.translator),\n                ...ft\n            };\n            this._fileTypes.push(value);\n        });\n    }\n    /**\n     * A signal emitted when the registry has changed.\n     */\n    get changed() {\n        return this._changed;\n    }\n    /**\n     * Get whether the document registry has been disposed.\n     */\n    get isDisposed() {\n        return this._isDisposed;\n    }\n    /**\n     * Dispose of the resources held by the document registry.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        this._isDisposed = true;\n        for (const modelName in this._modelFactories) {\n            this._modelFactories[modelName].dispose();\n        }\n        for (const widgetName in this._widgetFactories) {\n            this._widgetFactories[widgetName].dispose();\n        }\n        for (const widgetName in this._extenders) {\n            this._extenders[widgetName].length = 0;\n        }\n        this._fileTypes.length = 0;\n        Signal.clearData(this);\n    }\n    /**\n     * Add a widget factory to the registry.\n     *\n     * @param factory - The factory instance to register.\n     *\n     * @returns A disposable which will unregister the factory.\n     *\n     * #### Notes\n     * If a factory with the given `'name'` is already registered,\n     * a warning will be logged, and this will be a no-op.\n     * If `'*'` is given as a default extension, the factory will be registered\n     * as the global default.\n     * If an extension or global default is already registered, this factory\n     * will override the existing default.\n     * The factory cannot be named an empty string or the string `'default'`.\n     */\n    addWidgetFactory(factory) {\n        const name = factory.name.toLowerCase();\n        if (!name || name === 'default') {\n            throw Error('Invalid factory name');\n        }\n        if (this._widgetFactories[name]) {\n            console.warn(`Duplicate registered factory ${name}`);\n            return new DisposableDelegate(Private.noOp);\n        }\n        this._widgetFactories[name] = factory;\n        for (const ft of factory.defaultFor || []) {\n            if (factory.fileTypes.indexOf(ft) === -1) {\n                continue;\n            }\n            if (ft === '*') {\n                this._defaultWidgetFactory = name;\n            }\n            else {\n                this._defaultWidgetFactories[ft] = name;\n            }\n        }\n        for (const ft of factory.defaultRendered || []) {\n            if (factory.fileTypes.indexOf(ft) === -1) {\n                continue;\n            }\n            this._defaultRenderedWidgetFactories[ft] = name;\n        }\n        // For convenience, store a mapping of file type name -> name\n        for (const ft of factory.fileTypes) {\n            if (!this._widgetFactoriesForFileType[ft]) {\n                this._widgetFactoriesForFileType[ft] = [];\n            }\n            this._widgetFactoriesForFileType[ft].push(name);\n        }\n        this._changed.emit({\n            type: 'widgetFactory',\n            name,\n            change: 'added'\n        });\n        return new DisposableDelegate(() => {\n            delete this._widgetFactories[name];\n            if (this._defaultWidgetFactory === name) {\n                this._defaultWidgetFactory = '';\n            }\n            for (const ext of Object.keys(this._defaultWidgetFactories)) {\n                if (this._defaultWidgetFactories[ext] === name) {\n                    delete this._defaultWidgetFactories[ext];\n                }\n            }\n            for (const ext of Object.keys(this._defaultRenderedWidgetFactories)) {\n                if (this._defaultRenderedWidgetFactories[ext] === name) {\n                    delete this._defaultRenderedWidgetFactories[ext];\n                }\n            }\n            for (const ext of Object.keys(this._widgetFactoriesForFileType)) {\n                ArrayExt.removeFirstOf(this._widgetFactoriesForFileType[ext], name);\n                if (this._widgetFactoriesForFileType[ext].length === 0) {\n                    delete this._widgetFactoriesForFileType[ext];\n                }\n            }\n            for (const ext of Object.keys(this._defaultWidgetFactoryOverrides)) {\n                if (this._defaultWidgetFactoryOverrides[ext] === name) {\n                    delete this._defaultWidgetFactoryOverrides[ext];\n                }\n            }\n            this._changed.emit({\n                type: 'widgetFactory',\n                name,\n                change: 'removed'\n            });\n        });\n    }\n    /**\n     * Add a model factory to the registry.\n     *\n     * @param factory - The factory instance.\n     *\n     * @returns A disposable which will unregister the factory.\n     *\n     * #### Notes\n     * If a factory with the given `name` is already registered, or\n     * the given factory is already registered, a warning will be logged\n     * and this will be a no-op.\n     */\n    addModelFactory(factory) {\n        const name = factory.name.toLowerCase();\n        if (this._modelFactories[name]) {\n            console.warn(`Duplicate registered factory ${name}`);\n            return new DisposableDelegate(Private.noOp);\n        }\n        this._modelFactories[name] = factory;\n        this._changed.emit({\n            type: 'modelFactory',\n            name,\n            change: 'added'\n        });\n        return new DisposableDelegate(() => {\n            delete this._modelFactories[name];\n            this._changed.emit({\n                type: 'modelFactory',\n                name,\n                change: 'removed'\n            });\n        });\n    }\n    /**\n     * Add a widget extension to the registry.\n     *\n     * @param widgetName - The name of the widget factory.\n     *\n     * @param extension - A widget extension.\n     *\n     * @returns A disposable which will unregister the extension.\n     *\n     * #### Notes\n     * If the extension is already registered for the given\n     * widget name, a warning will be logged and this will be a no-op.\n     */\n    addWidgetExtension(widgetName, extension) {\n        widgetName = widgetName.toLowerCase();\n        if (!(widgetName in this._extenders)) {\n            this._extenders[widgetName] = [];\n        }\n        const extenders = this._extenders[widgetName];\n        const index = ArrayExt.firstIndexOf(extenders, extension);\n        if (index !== -1) {\n            console.warn(`Duplicate registered extension for ${widgetName}`);\n            return new DisposableDelegate(Private.noOp);\n        }\n        this._extenders[widgetName].push(extension);\n        this._changed.emit({\n            type: 'widgetExtension',\n            name: widgetName,\n            change: 'added'\n        });\n        return new DisposableDelegate(() => {\n            ArrayExt.removeFirstOf(this._extenders[widgetName], extension);\n            this._changed.emit({\n                type: 'widgetExtension',\n                name: widgetName,\n                change: 'removed'\n            });\n        });\n    }\n    /**\n     * Add a file type to the document registry.\n     *\n     * @param fileType - The file type object to register.\n     * @param factories - Optional factories to use for the file type.\n     *\n     * @returns A disposable which will unregister the command.\n     *\n     * #### Notes\n     * These are used to populate the \"Create New\" dialog.\n     *\n     * If no default factory exists for the file type, the first factory will\n     * be defined as default factory.\n     */\n    addFileType(fileType, factories) {\n        const value = {\n            ...DocumentRegistry.getFileTypeDefaults(this.translator),\n            ...fileType,\n            // fall back to fileIcon if needed\n            ...(!(fileType.icon || fileType.iconClass) && { icon: fileIcon })\n        };\n        this._fileTypes.push(value);\n        // Add the filetype to the factory - filetype mapping\n        //  We do not change the factory itself\n        if (factories) {\n            const fileTypeName = value.name.toLowerCase();\n            factories\n                .map(factory => factory.toLowerCase())\n                .forEach(factory => {\n                if (!this._widgetFactoriesForFileType[fileTypeName]) {\n                    this._widgetFactoriesForFileType[fileTypeName] = [];\n                }\n                if (!this._widgetFactoriesForFileType[fileTypeName].includes(factory)) {\n                    this._widgetFactoriesForFileType[fileTypeName].push(factory);\n                }\n            });\n            if (!this._defaultWidgetFactories[fileTypeName]) {\n                this._defaultWidgetFactories[fileTypeName] =\n                    this._widgetFactoriesForFileType[fileTypeName][0];\n            }\n        }\n        this._changed.emit({\n            type: 'fileType',\n            name: value.name,\n            change: 'added'\n        });\n        return new DisposableDelegate(() => {\n            ArrayExt.removeFirstOf(this._fileTypes, value);\n            if (factories) {\n                const fileTypeName = value.name.toLowerCase();\n                for (const name of factories.map(factory => factory.toLowerCase())) {\n                    ArrayExt.removeFirstOf(this._widgetFactoriesForFileType[fileTypeName], name);\n                }\n                if (this._defaultWidgetFactories[fileTypeName] ===\n                    factories[0].toLowerCase()) {\n                    delete this._defaultWidgetFactories[fileTypeName];\n                }\n            }\n            this._changed.emit({\n                type: 'fileType',\n                name: fileType.name,\n                change: 'removed'\n            });\n        });\n    }\n    /**\n     * Get a list of the preferred widget factories.\n     *\n     * @param path - The file path to filter the results.\n     *\n     * @returns A new array of widget factories.\n     *\n     * #### Notes\n     * Only the widget factories whose associated model factory have\n     * been registered will be returned.\n     * The first item is considered the default. The returned array\n     * has widget factories in the following order:\n     * - path-specific default factory\n     * - path-specific default rendered factory\n     * - global default factory\n     * - all other path-specific factories\n     * - all other global factories\n     */\n    preferredWidgetFactories(path) {\n        const factories = new Set();\n        // Get the ordered matching file types.\n        const fts = this.getFileTypesForPath(PathExt.basename(path));\n        // Start with any user overrides for the defaults.\n        fts.forEach(ft => {\n            if (ft.name in this._defaultWidgetFactoryOverrides) {\n                factories.add(this._defaultWidgetFactoryOverrides[ft.name]);\n            }\n        });\n        // Next add the file type default factories.\n        fts.forEach(ft => {\n            if (ft.name in this._defaultWidgetFactories) {\n                factories.add(this._defaultWidgetFactories[ft.name]);\n            }\n        });\n        // Add the file type default rendered factories.\n        fts.forEach(ft => {\n            if (ft.name in this._defaultRenderedWidgetFactories) {\n                factories.add(this._defaultRenderedWidgetFactories[ft.name]);\n            }\n        });\n        // Add the global default factory.\n        if (this._defaultWidgetFactory) {\n            factories.add(this._defaultWidgetFactory);\n        }\n        // Add the file type factories in registration order.\n        for (const ft of fts) {\n            if (ft.name in this._widgetFactoriesForFileType) {\n                for (const n of this._widgetFactoriesForFileType[ft.name]) {\n                    factories.add(n);\n                }\n            }\n        }\n        // Add the rest of the global factories, in registration order.\n        if ('*' in this._widgetFactoriesForFileType) {\n            for (const n of this._widgetFactoriesForFileType['*']) {\n                factories.add(n);\n            }\n        }\n        // Construct the return list, checking to make sure the corresponding\n        // model factories are registered.\n        const factoryList = [];\n        for (const name of factories) {\n            const factory = this._widgetFactories[name];\n            if (!factory) {\n                continue;\n            }\n            const modelName = factory.modelName || 'text';\n            if (modelName in this._modelFactories) {\n                factoryList.push(factory);\n            }\n        }\n        return factoryList;\n    }\n    /**\n     * Get the default rendered widget factory for a path.\n     *\n     * @param path - The path to for which to find a widget factory.\n     *\n     * @returns The default rendered widget factory for the path.\n     *\n     * ### Notes\n     * If the widget factory has registered a separate set of `defaultRendered`\n     * file types and there is a match in that set, this returns that.\n     * Otherwise, this returns the same widget factory as\n     * [[defaultWidgetFactory]].\n     *\n     * The user setting `defaultViewers` took precedence on this one too.\n     */\n    defaultRenderedWidgetFactory(path) {\n        // Get the matching file types.\n        const ftNames = this.getFileTypesForPath(PathExt.basename(path)).map(ft => ft.name);\n        // Start with any user overrides for the defaults.\n        for (const name in ftNames) {\n            if (name in this._defaultWidgetFactoryOverrides) {\n                return this._widgetFactories[this._defaultWidgetFactoryOverrides[name]];\n            }\n        }\n        // Find if a there is a default rendered factory for this type.\n        for (const name in ftNames) {\n            if (name in this._defaultRenderedWidgetFactories) {\n                return this._widgetFactories[this._defaultRenderedWidgetFactories[name]];\n            }\n        }\n        // Fallback to the default widget factory\n        return this.defaultWidgetFactory(path);\n    }\n    /**\n     * Get the default widget factory for a path.\n     *\n     * @param path - An optional file path to filter the results.\n     *\n     * @returns The default widget factory for an path.\n     *\n     * #### Notes\n     * This is equivalent to the first value in [[preferredWidgetFactories]].\n     */\n    defaultWidgetFactory(path) {\n        if (!path) {\n            return this._widgetFactories[this._defaultWidgetFactory];\n        }\n        return this.preferredWidgetFactories(path)[0];\n    }\n    /**\n     * Set overrides for the default widget factory for a file type.\n     *\n     * Normally, a widget factory informs the document registry which file types\n     * it should be the default for using the `defaultFor` option in the\n     * IWidgetFactoryOptions. This function can be used to override that after\n     * the fact.\n     *\n     * @param fileType: The name of the file type.\n     *\n     * @param factory: The name of the factory.\n     *\n     * #### Notes\n     * If `factory` is undefined, then any override will be unset, and the\n     * default factory will revert to the original value.\n     *\n     * If `factory` or `fileType` are not known to the docregistry, or\n     * if `factory` cannot open files of type `fileType`, this will throw\n     * an error.\n     */\n    setDefaultWidgetFactory(fileType, factory) {\n        fileType = fileType.toLowerCase();\n        if (!this.getFileType(fileType)) {\n            throw Error(`Cannot find file type ${fileType}`);\n        }\n        if (!factory) {\n            if (this._defaultWidgetFactoryOverrides[fileType]) {\n                delete this._defaultWidgetFactoryOverrides[fileType];\n            }\n            return;\n        }\n        if (!this.getWidgetFactory(factory)) {\n            throw Error(`Cannot find widget factory ${factory}`);\n        }\n        factory = factory.toLowerCase();\n        const factories = this._widgetFactoriesForFileType[fileType];\n        if (factory !== this._defaultWidgetFactory &&\n            !(factories && factories.includes(factory))) {\n            throw Error(`Factory ${factory} cannot view file type ${fileType}`);\n        }\n        this._defaultWidgetFactoryOverrides[fileType] = factory;\n    }\n    /**\n     * Create an iterator over the widget factories that have been registered.\n     *\n     * @returns A new iterator of widget factories.\n     */\n    *widgetFactories() {\n        for (const name in this._widgetFactories) {\n            yield this._widgetFactories[name];\n        }\n    }\n    /**\n     * Create an iterator over the model factories that have been registered.\n     *\n     * @returns A new iterator of model factories.\n     */\n    *modelFactories() {\n        for (const name in this._modelFactories) {\n            yield this._modelFactories[name];\n        }\n    }\n    /**\n     * Create an iterator over the registered extensions for a given widget.\n     *\n     * @param widgetName - The name of the widget factory.\n     *\n     * @returns A new iterator over the widget extensions.\n     */\n    *widgetExtensions(widgetName) {\n        widgetName = widgetName.toLowerCase();\n        if (widgetName in this._extenders) {\n            for (const extension of this._extenders[widgetName]) {\n                yield extension;\n            }\n        }\n    }\n    /**\n     * Create an iterator over the file types that have been registered.\n     *\n     * @returns A new iterator of file types.\n     */\n    *fileTypes() {\n        for (const type of this._fileTypes) {\n            yield type;\n        }\n    }\n    /**\n     * Get a widget factory by name.\n     *\n     * @param widgetName - The name of the widget factory.\n     *\n     * @returns A widget factory instance.\n     */\n    getWidgetFactory(widgetName) {\n        return this._widgetFactories[widgetName.toLowerCase()];\n    }\n    /**\n     * Get a model factory by name.\n     *\n     * @param name - The name of the model factory.\n     *\n     * @returns A model factory instance.\n     */\n    getModelFactory(name) {\n        return this._modelFactories[name.toLowerCase()];\n    }\n    /**\n     * Get a file type by name.\n     */\n    getFileType(name) {\n        name = name.toLowerCase();\n        return find(this._fileTypes, fileType => {\n            return fileType.name.toLowerCase() === name;\n        });\n    }\n    /**\n     * Get a kernel preference.\n     *\n     * @param path - The file path.\n     *\n     * @param widgetName - The name of the widget factory.\n     *\n     * @param kernel - An optional existing kernel model.\n     *\n     * @returns A kernel preference.\n     */\n    getKernelPreference(path, widgetName, kernel) {\n        widgetName = widgetName.toLowerCase();\n        const widgetFactory = this._widgetFactories[widgetName];\n        if (!widgetFactory) {\n            return void 0;\n        }\n        const modelFactory = this.getModelFactory(widgetFactory.modelName || 'text');\n        if (!modelFactory) {\n            return void 0;\n        }\n        const language = modelFactory.preferredLanguage(PathExt.basename(path));\n        const name = kernel && kernel.name;\n        const id = kernel && kernel.id;\n        return {\n            id,\n            name,\n            language,\n            shouldStart: widgetFactory.preferKernel,\n            canStart: widgetFactory.canStartKernel,\n            shutdownOnDispose: widgetFactory.shutdownOnClose,\n            autoStartDefault: widgetFactory.autoStartDefault\n        };\n    }\n    /**\n     * Get the best file type given a contents model.\n     *\n     * @param model - The contents model of interest.\n     *\n     * @returns The best matching file type.\n     */\n    getFileTypeForModel(model) {\n        switch (model.type) {\n            case 'directory':\n                return (find(this._fileTypes, ft => ft.contentType === 'directory') ||\n                    DocumentRegistry.getDefaultDirectoryFileType(this.translator));\n            case 'notebook':\n                return (find(this._fileTypes, ft => ft.contentType === 'notebook') ||\n                    DocumentRegistry.getDefaultNotebookFileType(this.translator));\n            default:\n                // Find the best matching extension.\n                if (model.name || model.path) {\n                    const name = model.name || PathExt.basename(model.path);\n                    const fts = this.getFileTypesForPath(name);\n                    if (fts.length > 0) {\n                        return fts[0];\n                    }\n                }\n                return (this.getFileType('text') ||\n                    DocumentRegistry.getDefaultTextFileType(this.translator));\n        }\n    }\n    /**\n     * Get the file types that match a file name.\n     *\n     * @param path - The path of the file.\n     *\n     * @returns An ordered list of matching file types.\n     */\n    getFileTypesForPath(path) {\n        const fts = [];\n        const name = PathExt.basename(path);\n        // Look for a pattern match first.\n        let ft = find(this._fileTypes, ft => {\n            return !!(ft.pattern && name.match(ft.pattern) !== null);\n        });\n        if (ft) {\n            fts.push(ft);\n        }\n        // Then look by extension name, starting with the longest\n        let ext = Private.extname(name);\n        while (ext.length > 1) {\n            const ftSubset = this._fileTypes.filter(ft => \n            // In Private.extname, the extension is transformed to lower case\n            ft.extensions.map(extension => extension.toLowerCase()).includes(ext));\n            fts.push(...ftSubset);\n            ext = '.' + ext.split('.').slice(2).join('.');\n        }\n        return fts;\n    }\n}\n/**\n * The namespace for the `DocumentRegistry` class statics.\n */\n(function (DocumentRegistry) {\n    /**\n     * The defaults used for a file type.\n     *\n     * @param translator - The application language translator.\n     *\n     * @returns The default file type.\n     */\n    function getFileTypeDefaults(translator) {\n        translator = translator || nullTranslator;\n        const trans = translator === null || translator === void 0 ? void 0 : translator.load('jupyterlab');\n        return {\n            name: 'default',\n            displayName: trans.__('default'),\n            extensions: [],\n            mimeTypes: [],\n            contentType: 'file',\n            fileFormat: 'text'\n        };\n    }\n    DocumentRegistry.getFileTypeDefaults = getFileTypeDefaults;\n    /**\n     * The default text file type used by the document registry.\n     *\n     * @param translator - The application language translator.\n     *\n     * @returns The default text file type.\n     */\n    function getDefaultTextFileType(translator) {\n        translator = translator || nullTranslator;\n        const trans = translator === null || translator === void 0 ? void 0 : translator.load('jupyterlab');\n        const fileTypeDefaults = getFileTypeDefaults(translator);\n        return {\n            ...fileTypeDefaults,\n            name: 'text',\n            displayName: trans.__('Text'),\n            mimeTypes: ['text/plain'],\n            extensions: ['.txt'],\n            icon: fileIcon\n        };\n    }\n    DocumentRegistry.getDefaultTextFileType = getDefaultTextFileType;\n    /**\n     * The default notebook file type used by the document registry.\n     *\n     * @param translator - The application language translator.\n     *\n     * @returns The default notebook file type.\n     */\n    function getDefaultNotebookFileType(translator) {\n        translator = translator || nullTranslator;\n        const trans = translator === null || translator === void 0 ? void 0 : translator.load('jupyterlab');\n        return {\n            ...getFileTypeDefaults(translator),\n            name: 'notebook',\n            displayName: trans.__('Notebook'),\n            mimeTypes: ['application/x-ipynb+json'],\n            extensions: ['.ipynb'],\n            contentType: 'notebook',\n            fileFormat: 'json',\n            icon: notebookIcon\n        };\n    }\n    DocumentRegistry.getDefaultNotebookFileType = getDefaultNotebookFileType;\n    /**\n     * The default directory file type used by the document registry.\n     *\n     * @param translator - The application language translator.\n     *\n     * @returns The default directory file type.\n     */\n    function getDefaultDirectoryFileType(translator) {\n        translator = translator || nullTranslator;\n        const trans = translator === null || translator === void 0 ? void 0 : translator.load('jupyterlab');\n        return {\n            ...getFileTypeDefaults(translator),\n            name: 'directory',\n            displayName: trans.__('Directory'),\n            extensions: [],\n            mimeTypes: ['text/directory'],\n            contentType: 'directory',\n            icon: folderIcon\n        };\n    }\n    DocumentRegistry.getDefaultDirectoryFileType = getDefaultDirectoryFileType;\n    /**\n     * The default file types used by the document registry.\n     *\n     * @param translator - The application language translator.\n     *\n     * @returns The default directory file types.\n     */\n    function getDefaultFileTypes(translator) {\n        translator = translator || nullTranslator;\n        const trans = translator === null || translator === void 0 ? void 0 : translator.load('jupyterlab');\n        return [\n            getDefaultTextFileType(translator),\n            getDefaultNotebookFileType(translator),\n            getDefaultDirectoryFileType(translator),\n            {\n                name: 'markdown',\n                displayName: trans.__('Markdown File'),\n                extensions: ['.md'],\n                mimeTypes: ['text/markdown'],\n                icon: markdownIcon\n            },\n            {\n                name: 'PDF',\n                displayName: trans.__('PDF File'),\n                extensions: ['.pdf'],\n                mimeTypes: ['application/pdf'],\n                icon: pdfIcon\n            },\n            {\n                name: 'python',\n                displayName: trans.__('Python File'),\n                extensions: ['.py'],\n                mimeTypes: ['text/x-python'],\n                icon: pythonIcon\n            },\n            {\n                name: 'json',\n                displayName: trans.__('JSON File'),\n                extensions: ['.json'],\n                mimeTypes: ['application/json'],\n                icon: jsonIcon\n            },\n            {\n                name: 'julia',\n                displayName: trans.__('Julia File'),\n                extensions: ['.jl'],\n                mimeTypes: ['text/x-julia'],\n                icon: juliaIcon\n            },\n            {\n                name: 'csv',\n                displayName: trans.__('CSV File'),\n                extensions: ['.csv'],\n                mimeTypes: ['text/csv'],\n                icon: spreadsheetIcon\n            },\n            {\n                name: 'tsv',\n                displayName: trans.__('TSV File'),\n                extensions: ['.tsv'],\n                mimeTypes: ['text/csv'],\n                icon: spreadsheetIcon\n            },\n            {\n                name: 'r',\n                displayName: trans.__('R File'),\n                mimeTypes: ['text/x-rsrc'],\n                extensions: ['.R'],\n                icon: rKernelIcon\n            },\n            {\n                name: 'yaml',\n                displayName: trans.__('YAML File'),\n                mimeTypes: ['text/x-yaml', 'text/yaml'],\n                extensions: ['.yaml', '.yml'],\n                icon: yamlIcon\n            },\n            {\n                name: 'svg',\n                displayName: trans.__('Image'),\n                mimeTypes: ['image/svg+xml'],\n                extensions: ['.svg'],\n                icon: imageIcon,\n                fileFormat: 'base64'\n            },\n            {\n                name: 'tiff',\n                displayName: trans.__('Image'),\n                mimeTypes: ['image/tiff'],\n                extensions: ['.tif', '.tiff'],\n                icon: imageIcon,\n                fileFormat: 'base64'\n            },\n            {\n                name: 'jpeg',\n                displayName: trans.__('Image'),\n                mimeTypes: ['image/jpeg'],\n                extensions: ['.jpg', '.jpeg'],\n                icon: imageIcon,\n                fileFormat: 'base64'\n            },\n            {\n                name: 'gif',\n                displayName: trans.__('Image'),\n                mimeTypes: ['image/gif'],\n                extensions: ['.gif'],\n                icon: imageIcon,\n                fileFormat: 'base64'\n            },\n            {\n                name: 'png',\n                displayName: trans.__('Image'),\n                mimeTypes: ['image/png'],\n                extensions: ['.png'],\n                icon: imageIcon,\n                fileFormat: 'base64'\n            },\n            {\n                name: 'bmp',\n                displayName: trans.__('Image'),\n                mimeTypes: ['image/bmp'],\n                extensions: ['.bmp'],\n                icon: imageIcon,\n                fileFormat: 'base64'\n            },\n            {\n                name: 'webp',\n                displayName: trans.__('Image'),\n                mimeTypes: ['image/webp'],\n                extensions: ['.webp'],\n                icon: imageIcon,\n                fileFormat: 'base64'\n            }\n        ];\n    }\n    DocumentRegistry.getDefaultFileTypes = getDefaultFileTypes;\n})(DocumentRegistry || (DocumentRegistry = {}));\n/**\n * A private namespace for DocumentRegistry data.\n */\nvar Private;\n(function (Private) {\n    /**\n     * Get the extension name of a path.\n     *\n     * @param path - string.\n     *\n     * #### Notes\n     * Dotted filenames (e.g. `\".table.json\"` are allowed).\n     */\n    function extname(path) {\n        const parts = PathExt.basename(path).split('.');\n        parts.shift();\n        const ext = '.' + parts.join('.');\n        return ext.toLowerCase();\n    }\n    Private.extname = extname;\n    /**\n     * A no-op function.\n     */\n    function noOp() {\n        /* no-op */\n    }\n    Private.noOp = noOp;\n})(Private || (Private = {}));\n//# sourceMappingURL=registry.js.map"],"names":["Private","Context","constructor","options","_a","_b","this","_isReady","_isDisposed","_isPopulated","_path","_lineEnding","_contentsModel","_populatedPromise","PromiseDelegate","_pathChanged","Signal","_fileChanged","_saveState","_disposed","_lastModifiedCheckMargin","_timeConflictModalIsOpen","manager","_manager","translator","nullTranslator","_trans","load","_factory","factory","_dialogs","sessionDialogs","SessionContextDialogs","_opener","opener","noOp","contents","normalize","path","lastModifiedCheckMargin","localPath","lang","preferredLanguage","PathExt","basename","sharedFactory","getSharedModelFactory","sharedModel","createNew","format","fileFormat","contentType","collaborative","_model","languagePreference","collaborationEnabled","_readyPromise","ready","then","promise","ext","extname","sessionContext","SessionContext","sessionManager","sessions","specsManager","kernelspecs","type","name","kernelPreference","shouldStart","setBusy","propertyChanged","connect","_onSessionChanged","fileChanged","_onFileChanged","urlResolver","RenderMimeRegistry","UrlResolver","model","changed","onStateChanged","pathChanged","saveState","disposed","value","contentsModel","factoryName","isDisposed","dispose","emit","clearData","isReady","canSave","writable","initialize","isNew","_save","_revert","clearUndoHistory","rename","newName","_rename","save","saveAs","newLocalPath","getSavePath","drive","driveName","newPath","get","_maybeOverWrite","err","response","status","_finishSaveAs","download","url","getDownloadUrl","element","document","createElement","href","body","appendChild","click","removeChild","revert","createCheckpoint","deleteCheckpoint","checkpointId","restoreCheckpoint","listCheckpoints","checkpoints","length","id","addSibling","widget","DisposableDelegate","close","sender","changes","stateChange","forEach","change","newValue","_updatePath","oldPath","oldValue","indexOf","changeModel","replace","RegExp","last_modified","created","_updateContentsModel","session","newModel","content","undefined","mimetype","mod","setState","_c","_d","setPath","setName","getState","_populate","resolve","_maybeCheckpoint","defaultKernelName","language","defaultKernelLanguage","shouldSelect","selectKernel","splitPath","split","join","_createSaveOptions","_maybeSave","dirty","file","_handleError","__","initializeModel","opts","fromJSON","fromString","catch","async","Promise","reject","Error","modified","tClient","Date","tDisk","getTime","_timeConflict","title","showErrorMessage","force","console","warn","error","revertBtn","Dialog","okButton","label","actions","overwriteBtn","warnButton","showDialog","buttons","cancelButton","result","button","includes","accept","delete","message","toJSON","toString","trans","saveBtn","SaveWidget","Widget","super","node","createSaveNode","getValue","input","DocumentModel","CodeEditor","Model","_defaultLang","_dirty","_readOnly","_contentChanged","_stateChanged","_collaborationEnabled","_onStateChanged","contentChanged","stateChanged","triggerStateChange","readOnly","getSource","setSource","JSON","parse","stringify","args","triggerContentChange","sourceChange","TextModelFactory","_collaborative","Base64ModelFactory","ABCWidgetFactory","_widgetCreated","_translator","_name","_label","_defaultFor","defaultFor","slice","_defaultRendered","defaultRendered","_fileTypes","fileTypes","_modelName","modelName","_preferKernel","preferKernel","_canStartKernel","canStartKernel","_shutdownOnClose","shutdownOnClose","_autoStartDefault","autoStartDefault","_toolbarFactory","toolbarFactory","widgetCreated","context","source","createNewWidget","setToolbar","defaultToolbarFactory","bind","DIRTY_CLASS","DocumentWidget","MainAreaWidget","reveal","all","_onPathChanged","_onModelStateChanged","_handleDirtyState","_onTitleChanged","setFragment","fragment","_sender","filename","pop","test","isUntitled","className","MimeContent","_changeCallback","data","mimeType","_context","JSONExt","deepEqual","_fragment","_ready","_isRendering","_renderRequested","addClass","_dataType","dataType","renderer","layout","StackedLayout","addWidget","_render","activeElement","MessageLoop","sendMessage","Msg","ActivateRequest","_monitor","ActivityMonitor","signal","timeout","renderTimeout","activityStopped","update","reason","requestAnimationFrame","Printing","symbol","getPrintFunction","onUpdateRequest","msg","mimeModel","MimeModel","callback","metadata","renderModel","MimeDocument","MimeDocumentFactory","createRegistryOptions","_rendermime","rendermime","_renderTimeout","_fileType","primaryFileType","ft","mimeTypes","clone","resolver","createRenderer","sanitizer","linkHandler","latexTypesetter","markdownParser","icon","iconClass","iconLabel","DocumentRegistry","_modelFactories","Object","create","_widgetFactories","_defaultWidgetFactory","_defaultWidgetFactoryOverrides","_defaultWidgetFactories","_defaultRenderedWidgetFactories","_widgetFactoriesForFileType","_extenders","_changed","textModelFactory","initialFileTypes","getDefaultFileTypes","getFileTypeDefaults","push","widgetName","addWidgetFactory","toLowerCase","keys","ArrayExt","removeFirstOf","addModelFactory","addWidgetExtension","extension","extenders","firstIndexOf","addFileType","fileType","factories","fileIcon","fileTypeName","map","preferredWidgetFactories","Set","fts","getFileTypesForPath","add","n","factoryList","defaultRenderedWidgetFactory","ftNames","defaultWidgetFactory","setDefaultWidgetFactory","getFileType","getWidgetFactory","widgetFactories","modelFactories","widgetExtensions","getModelFactory","find","getKernelPreference","kernel","widgetFactory","modelFactory","canStart","shutdownOnDispose","getFileTypeForModel","getDefaultDirectoryFileType","getDefaultNotebookFileType","getDefaultTextFileType","pattern","match","ftSubset","filter","extensions","displayName","notebookIcon","folderIcon","markdownIcon","pdfIcon","pythonIcon","jsonIcon","juliaIcon","spreadsheetIcon","rKernelIcon","yamlIcon","imageIcon","parts","shift"],"sourceRoot":""}